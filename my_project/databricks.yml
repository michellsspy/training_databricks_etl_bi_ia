# Databricks asset bundle definition - Refatorado para Unity Catalog (Serverless Only)
bundle:
  name: my_project
  uuid: 4b77879e-ff53-473c-81ac-80d6b7b80c18

include:
  - resources/*.yml
  - resources/*/*.yml

artifacts:
  python_artifact:
    type: whl
    build: uv build --wheel

variables:
  catalog:
    default: development
    description: O catálogo alvo (Unity Catalog)
  schema:
    description: O schema alvo (Camada Bronze/Silver/Gold)

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://dbc-57328b27-9cd1.cloud.databricks.com
    variables:
      # Alterado de hive_metastore para o seu catálogo real
      catalog: development 
      # Mantendo seu padrão de nomenclatura para evitar colisão em dev
      schema: dev_${workspace.current_user.short_name}_medallion 
  prod:
    mode: production
    workspace:
      host: https://dbc-57328b27-9cd1.cloud.databricks.com
      root_path: /Workspace/Users/michel.treino01@gmail.com/.bundle/${bundle.name}/${bundle.target}
    variables:
      catalog: production
      schema: bronze # Ou o schema específico de produção que definir
    permissions:
      - user_name: michel.treino01@gmail.com
        level: CAN_MANAGE