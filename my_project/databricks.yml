# This is a Databricks asset bundle definition for my_project.
bundle:
  name: my_project
  uuid: 4b77879e-ff53-473c-81ac-80d6b7b80c18

include:
  - resources/*.yml
  - resources/*/*.yml

artifacts:
  python_artifact:
    type: whl
    build: uv build --wheel

variables:
  catalog:
    description: The catalog to use
  schema:
    description: The schema to use

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://dbc-57328b27-9cd1.cloud.databricks.com
    variables:
      catalog: hive_metastore
      # Ajustado para seguir o padr√£o [ambiente].[sistema]_[entidade] do seu guia
      schema: dev_${workspace.current_user.short_name}_medallion 
  prod:
    mode: production
    workspace:
      host: https://dbc-57328b27-9cd1.cloud.databricks.com
      root_path: /Workspace/Users/michel.treino01@gmail.com/.bundle/${bundle.name}/${bundle.target}
    variables:
      catalog: hive_metastore
      schema: prd_sales_medallion
    permissions:
      - user_name: michel.treino01@gmail.com
        level: CAN_MANAGE